{% extends "students/base.html" %}
{% load static %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Dashboard Overview</h2>
  <div class="list-group">
    <!-- Activity Targets -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-bullseye"></i></span>
          <strong>Activity Targets</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_targets }} / {{ max_targets }}</span>
          <a href="{% url 'targets' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ targets_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Networking Contacts -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-people"></i></span>
          <strong>Networking Contacts</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_contacts }} / {{ max_contacts }}</span>
          <a href="{% url 'networking' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ networking_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Job Applications -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-briefcase"></i></span>
          <strong>Job Applications</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_applications }} / {{ max_applications }}</span>
          <a href="{% url 'applications' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ applications_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Direct Approach -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-send"></i></span>
          <strong>Direct Approach</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_direct_approach }} / {{ max_direct_approach }}</span>
          <a href="{% url 'direct_approach' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ direct_approach_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Recruiters -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-person-badge"></i></span>
          <strong>Recruiters</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_recruiters }} / {{ max_recruiters }}</span>
          <a href="{% url 'recruiters' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ recruiters_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Interviews -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-chat-dots"></i></span>
          <strong>Interviews</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_interviews }} / {{ max_interviews }}</span>
          <a href="{% url 'interviews' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ interviews_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- LinkedIn Posts -->
    <div class="list-group-item">
      <div class="row align-items-center">
        <div class="col-md-4 col-12 d-flex align-items-center">
          <span class="me-2"><i class="bi bi-linkedin"></i></span>
          <strong>LinkedIn Posts</strong>
        </div>
        <div class="col-md-8 col-12 d-flex justify-content-end align-items-center">
          <span class="badge bg-primary rounded-pill me-2">{{ num_linkedin_posts }} / {{ max_linkedin_posts }}</span>
          <a href="{% url 'linkedin_posts' %}" class="btn btn-sm btn-outline-primary">View</a>
        </div>
        <div class="col-12 mt-2">
          <div class="progress" style="height: 8px;">
            <div class="progress-bar bg-primary"
                 role="progressbar"
                 style="width: 0%"
                 data-progress="{{ linkedin_posts_progress }}">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-4">Recent Job Applications</h4>
  <ul class="list-group mb-4">
      {% for app in recent_applications %}
          <li class="list-group-item">
              <strong>{{ app.company_name }}</strong> â€” {{ app.job_title }} <span class="text-muted">({{ app.date_applied }})</span>
          </li>
      {% empty %}
          <li class="list-group-item">No recent applications.</li>
      {% endfor %}
  </ul>
</div>
{% endblock %}
{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll('.progress-bar[data-progress]').forEach(function(bar) {
    const value = bar.getAttribute('data-progress');
    setTimeout(function() {
      bar.style.width = value + '%';
    }, 300);
  });
});
</script>
{% endblock %}